(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{1990:function(e,t,n){Promise.resolve().then(n.bind(n,6352))},3001:function(e,t,n){"use strict";n.d(t,{BJ:function(){return o},BZ:function(){return m},Fw:function(){return p},Ns:function(){return y},ZB:function(){return _},d8:function(){return r},jo:function(){return h},li:function(){return l},lp:function(){return u},m3:function(){return d},v_:function(){return f}});let r=e=>!(e instanceof Error),i=async e=>{try{let t=await fetch(e);if(200!==t.status)throw Error();return await t.json()}catch(e){return e}},s=e=>{let t=JSON.stringify(e),n=JSON.parse(t=t.replaceAll("_id","id"));return{...n,category:n.categories}},a=e=>e.map(e=>s(e)),c=(e,t)=>(e=a(e)).filter(e=>e.users.find(e=>e.id===t)),o=async(e,t)=>{let n=await i("".concat(e,"?categories.name=").concat(t));return r(n)?a(n):n},l=async(e,t)=>{let n=await i("".concat(e,"/").concat(t));return r(n)?s(n):n},u=async(e,t)=>{let n=await i(e);return r(n)?c(n,t):n},d=async(e,t,n)=>{try{let r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(200!==r.status&&"auth"===n)throw Error("Ошибка авторизации");if(200!==r.status&&"register"===n)throw Error("Ошибка регистрации");return await r.json()}catch(e){return e}},_=e=>{localStorage.setItem("jwt",e)},f=()=>localStorage.getItem("jwt"),p=()=>{localStorage.removeItem("jwt")},h=async(e,t)=>{try{let n=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(200!==n.status)throw Error("Ошибка получения данных");return await n.json()}catch(e){return e}},m=(e,t)=>e.users.find(e=>e.id===t),y=async(e,t,n)=>{try{let r=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({users:n})});if(200!==r.status)throw Error("Ошибка голосования");return await r.json()}catch(e){return e}}},6932:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});let r="https://brotherback.nomorepartiesco.ru/api",i={games:"".concat(r,"/games"),auth:"".concat(r,"/auth/login"),me:"".concat(r,"/me"),register:"".concat(r,"/registration")}},1088:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7437),i=n(6462),s=n.n(i);let a=e=>(0,r.jsxs)("article",{className:s().card,children:[(0,r.jsx)("img",{src:e.image,className:s().card__image}),(0,r.jsxs)("div",{className:s()["card__content-block"],children:[(0,r.jsx)("h3",{className:s().card__title,children:e.title}),(0,r.jsx)("p",{className:s().card__description,children:e.description}),(0,r.jsxs)("div",{className:s()["card__info-container"],children:[(0,r.jsxs)("p",{className:s().card__author,children:["Автор: ",(0,r.jsx)("span",{className:s().card__accent,children:e.developer})]}),(0,r.jsxs)("p",{className:s().card__votes,children:["Голосов на сайте:",(0,r.jsx)("span",{className:s().card__accent,children:e.users.length})]})]})]})]})},3270:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(7437);let i=()=>(0,r.jsx)("div",{style:{aspectRatio:"16/9",display:"grid",placeItems:"center"},className:"preloader",children:(0,r.jsxs)("svg",{style:{width:"10vw"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",children:[(0,r.jsx)("circle",{fill:"#FFF500",stroke:"#FFF500",strokeWidth:"15",r:"15",cx:"35",cy:"100",children:(0,r.jsx)("animate",{attributeName:"cx",calcMode:"spline",dur:"2",values:"35;165;165;35;35",keySplines:"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1",repeatCount:"indefinite",begin:"0"})}),(0,r.jsx)("circle",{fill:"#FFF500",stroke:"#FFF500",strokeWidth:"15",opacity:".8",r:"15",cx:"35",cy:"100",children:(0,r.jsx)("animate",{attributeName:"cx",calcMode:"spline",dur:"2",values:"35;165;165;35;35",keySplines:"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1",repeatCount:"indefinite",begin:"0.05"})}),(0,r.jsx)("circle",{fill:"#FFF500",stroke:"#FFF500",strokeWidth:"15",opacity:".6",r:"15",cx:"35",cy:"100",children:(0,r.jsx)("animate",{attributeName:"cx",calcMode:"spline",dur:"2",values:"35;165;165;35;35",keySplines:"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1",repeatCount:"indefinite",begin:".1"})}),(0,r.jsx)("circle",{fill:"#FFF500",stroke:"#FFF500",strokeWidth:"15",opacity:".4",r:"15",cx:"35",cy:"100",children:(0,r.jsx)("animate",{attributeName:"cx",calcMode:"spline",dur:"2",values:"35;165;165;35;35",keySplines:"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1",repeatCount:"indefinite",begin:".15"})}),(0,r.jsx)("circle",{fill:"#FFF500",stroke:"#FFF500",strokeWidth:"15",opacity:".2",r:"15",cx:"35",cy:"100",children:(0,r.jsx)("animate",{attributeName:"cx",calcMode:"spline",dur:"2",values:"35;165;165;35;35",keySplines:"0 .1 .5 1;0 .1 .5 1;0 .1 .5 1;0 .1 .5 1",repeatCount:"indefinite",begin:".2"})})]})})},6352:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(7437),i=n(9199),s=n.n(i),a=n(3001),c=n(7695),o=n(6932),l=n(2265),u=n(3270),d=n(1085),_=n.n(d),f=n(7138),p=n(1088);let h=()=>{let e=(0,c.o)(),[t,n]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{e.user&&n(await (0,a.lp)(o.H.games,e.user.id))})()},[e.user]),(0,r.jsxs)("section",{className:"voted__section",children:[(0,r.jsx)("h2",{className:_()["list-section__title"],children:"Вы проголосовали за:"}),t?(0,r.jsx)("ul",{className:_()["cards-list"],children:t.map(e=>(0,r.jsx)("li",{className:_()["cards-list__game"],children:(0,r.jsx)(f.default,{href:"/games/".concat(e.id),className:_()["card-list__link"],children:(0,r.jsx)(p.Z,{...e})})},e.id))}):(0,r.jsx)(u.p,{})]})};function m(e){let t=(0,c.o)();return t.isAuth?(0,r.jsx)("div",{className:s().about__user,children:t.user?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:s()["list-section__title"],children:"Профиль"}),(0,r.jsxs)("div",{className:s().info__user,children:["Имя: ",t.user.username,(0,r.jsx)("br",{}),"Email: ",t.user.email,(0,r.jsx)("br",{}),"id: ",t.user.id]}),(0,r.jsx)(h,{})]}):(0,r.jsx)(u.p,{})}):(0,r.jsx)("h2",{className:s().blocked__page,children:"Эта страница только для авторизованных пользователей"})}},7695:function(e,t,n){"use strict";let r;n.d(t,{o:function(){return h}});let i=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,s);return s},s=e=>e?i(e):i;var a=n(2265),c=n(5006);let{useDebugValue:o}=a,{useSyncExternalStoreWithSelector:l}=c,u=!1,d=e=>e,_=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,n=(e,n)=>(function(e,t=d,n){n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let r=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(r),r})(t,e,n);return Object.assign(n,t),n};var f=n(3001),p=n(6932);let h=(r=e=>({isAuth:!1,popupIsOpened:!1,typeForm:null,user:null,token:null,login:(t,n)=>{e({isAuth:!0,user:t,token:n}),(0,f.ZB)(n)},logout:()=>{e({isAuth:!1,user:null,token:null}),(0,f.Fw)()},checkAuth:async()=>{let t=(0,f.v_)();if(t){let n=await (0,f.jo)(p.H.me,t);n instanceof Error?(e({isAuth:!1,user:null,token:null}),(0,f.Fw)()):(e({isAuth:!0,user:{...n,id:n._id},token:t}),(0,f.ZB)(t))}},openPopup:t=>{e({popupIsOpened:!0,typeForm:t})},closePopup:()=>{e({popupIsOpened:!1,typeForm:null})}}))?_(r):_},4492:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,a=r.useEffect,c=r.useLayoutEffect,o=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return c(function(){i.value=n,i.getSnapshot=t,l(i)&&u({inst:i})},[e,n,t]),a(function(){return l(i)&&u({inst:i}),e(function(){l(i)&&u({inst:i})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5107:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),i=n(554),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,c=r.useRef,o=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=c(null);if(null===d.current){var _={hasValue:!1,value:null};d.current=_}else _=d.current;var f=a(e,(d=l(function(){function e(e){if(!o){if(o=!0,a=e,e=r(e),void 0!==i&&_.hasValue){var t=_.value;if(i(t,e))return c=t}return c=e}if(t=c,s(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,c=n)}var a,c,o=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,i]))[0],d[1]);return o(function(){_.hasValue=!0,_.value=f},[f]),u(f),f}},554:function(e,t,n){"use strict";e.exports=n(4492)},5006:function(e,t,n){"use strict";e.exports=n(5107)},6462:function(e){e.exports={"list-section":"Card_list-section__dLUAQ","list-section__title":"Card_list-section__title__75VAU","cards-list":"Card_cards-list__1cuFG","card-list__link":"Card_card-list__link__a3t4e",card:"Card_card__CWDle",card__image:"Card_card__image__4mueK","card__content-block":"Card_card__content-block__wBJdj",card__title:"Card_card__title__GTs84",card__description:"Card_card__description__D5I82","card__info-container":"Card_card__info-container__4sDHi",card__author:"Card_card__author__u6zAO",card__accent:"Card_card__accent__yghaH",card__votes:"Card_card__votes__P29Ky"}},1085:function(e){e.exports={"list-section__title":"Voted_list-section__title__jst21","cards-list":"Voted_cards-list__HJSi1","card-list__link":"Voted_card-list__link__StORl"}},9199:function(e){e.exports={"list-section":"Profile_list-section__muufi","list-section__title":"Profile_list-section__title__YxWSq",info__user:"Profile_info__user__eplLY",blocked__page:"Profile_blocked__page___RnJR"}}},function(e){e.O(0,[316,947,138,971,23,744],function(){return e(e.s=1990)}),_N_E=e.O()}]);