exports.id=50,exports.ids=[50],exports.modules={8408:(e,s,t)=>{Promise.resolve().then(t.bind(t,1012))},1329:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},1012:(e,s,t)=>{"use strict";t.d(s,{App:()=>P});var l=t(326),r=t(6472),a=t.n(r),o=t(8116),i=t.n(o);let n=e=>l.jsx("div",{className:`${i().overlay} ${e.isOpened&&i()["overlay_is-opened"]}`,onClick:e.closePopup});var _=t(2127),c=t.n(_),m=t(7577),u=t(515),d=t(6525),p=t(4797);let h=()=>{let e=(0,p.o)(),[s,t]=(0,m.useState)({email:"",password:""}),[r,a]=(0,m.useState)({status:null,text:null}),o=e=>{t({...s,[e.target.name]:e.target.value})},i=async t=>{t.preventDefault();let l=await (0,u.m3)(d.H.auth,s,e.typeForm);(0,u.d8)(l)?(e.login({...l,id:l._id},l.jwt),a({status:"success",text:"Вы авторизовались!"})):a({status:"error",text:"Неверные почта или пароль"})};return(0,m.useEffect)(()=>{let s;return e.user&&(s=setTimeout(()=>{e.closePopup(),a({status:null,text:null})},1e3)),()=>clearTimeout(s)},[e.user]),(0,l.jsxs)("form",{onSubmit:i,className:c().form,children:[l.jsx("h2",{className:c().form__title,children:"Авторизация"}),(0,l.jsxs)("div",{className:c().form__fields,children:[(0,l.jsxs)("label",{className:c().form__field,children:[l.jsx("span",{className:c()["form__field-title"],children:"Email"}),l.jsx("input",{className:c()["form__field-input"],onInput:o,name:"email",type:"email",placeholder:"hello@world.com"})]}),(0,l.jsxs)("label",{className:c().form__field,children:[l.jsx("span",{className:c()["form__field-title"],children:"Пароль"}),l.jsx("input",{className:c()["form__field-input"],onInput:o,name:"password",type:"password",placeholder:"***********"})]})]}),r.status&&l.jsx("p",{className:c().form__message,children:r.text}),(0,l.jsxs)("div",{className:c().form__actions,children:[l.jsx("button",{className:c().form__reset,type:"reset",children:"Очистить"}),l.jsx("button",{className:c().form__submit,type:"submit",children:"Войти"})]})]})},f=()=>{let e=(0,p.o)(),[s,t]=(0,m.useState)({username:"",email:"",password:""}),[r,a]=(0,m.useState)({status:null,text:null}),o=e=>{t({...s,[e.target.name]:e.target.value})},i=async t=>{t.preventDefault();let l=await (0,u.m3)(d.H.register,s,e.typeForm);(0,u.d8)(l)?(e.login({...l,id:l._id},l.jwt),a({status:"success",text:"Вы зарегистрировались!"})):a({status:"error",text:"Ошибка при регистрации"})};return(0,m.useEffect)(()=>{let s;return e.user&&(s=setTimeout(()=>{e.closePopup(),a({status:null,text:null})},1e3)),()=>clearTimeout(s)},[e.user]),(0,l.jsxs)("form",{onSubmit:i,className:c().form,children:[l.jsx("h2",{className:c().form__title,children:"Регистрация"}),(0,l.jsxs)("div",{className:c().form__fields,children:[(0,l.jsxs)("label",{className:c().form__field,children:[l.jsx("span",{className:c()["form__field-title"],children:"Ваш ник"}),l.jsx("input",{className:c()["form__field-input"],onInput:o,name:"username",type:"text",placeholder:"Иван"})]}),(0,l.jsxs)("label",{className:c().form__field,children:[l.jsx("span",{className:c()["form__field-title"],children:"Email"}),l.jsx("input",{className:c()["form__field-input"],onInput:o,name:"email",type:"email",placeholder:"hello@world.com"})]}),(0,l.jsxs)("label",{className:c().form__field,children:[l.jsx("span",{className:c()["form__field-title"],children:"Пароль"}),l.jsx("input",{className:c()["form__field-input"],onInput:o,name:"password",type:"password",placeholder:"***********"})]})]}),r.status&&l.jsx("p",{className:c().form__message,children:r.text}),(0,l.jsxs)("div",{className:c().form__actions,children:[l.jsx("button",{className:c().form__reset,type:"reset",children:"Очистить"}),l.jsx("button",{className:c().form__submit,type:"submit",children:"Зарегистрироваться"})]})]})};var x=t(5174),j=t.n(x);let N=e=>(0,l.jsxs)("div",{className:`${j().popup} ${e.isOpened&&j()["popup_is-opened"]}`,children:[l.jsx("button",{className:j().close,onClick:e.closePopup,children:l.jsx("svg",{className:j()["close-icon"],xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 25",children:l.jsx("path",{fill:"#7E8292",d:"M15.3321 18.34c.04.0667.06.1533.06.26 0 .0933-.0467.1867-.14.28-.08.08-.18.12-.3.12h-4.5c-.36 0-.63332-.1533-.81999-.46l-1.74-2.68-1.66 2.68c-.18667.3067-.46.46-.82.46h-4.36c-.120001 0-.226667-.04-.320001-.12-.08-.0933-.12-.1867-.12-.28 0-.1067.02-.1933.06-.26l4.200001-6.5-3.78-6.18c-.04-.08-.06-.16667-.06-.26s.04-.18.12-.26c.09333-.09333.2-.14.32-.14h4.34c.37333 0 .65333.16667.84.5l1.4 2.44 1.52-2.44c.18667-.33333.46669-.5.83999-.5h4.14c.12 0 .22.04667.3.14.0933.08.14.17333.14.28 0 .09333-.02.17333-.06.24l-3.86 6.12 4.26 6.56Z"})})}),l.jsx("div",{className:j().content,children:e.children})]});var g=t(434),v=t(5047);let y=()=>{let e=(0,p.o)(),s=(0,v.usePathname)();return(0,l.jsxs)("header",{className:a().header,children:["/"===s?l.jsx("div",{className:a().logo,children:l.jsx("img",{className:a().logo__image,src:"../images/logo.svg",alt:"Логотип Pindie"})}):l.jsx(g.default,{href:"/",className:a().logo,children:l.jsx("img",{className:a().logo__image,src:"../images/logo.svg",alt:"Логотип Pindie"})}),(0,l.jsxs)("nav",{className:a().menu,children:[(0,l.jsxs)("ul",{className:a().menu__list,children:[l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/new",className:`${a().menu__link} ${"/new"===s?a().menu__link_active:""}`,children:"Новинки"})}),l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/popular",className:`${a().menu__link} ${"/popular"===s?a().menu__link_active:""}`,children:"Популярные"})}),l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/shooters",className:`${a().menu__link} ${"/shooters"===s?a().menu__link_active:""}`,children:"Шутеры"})}),l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/runners",className:`${a().menu__link} ${"/runners"===s?a().menu__link_active:""}`,children:"Ранеры"})}),l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/pixel-games",className:`${a().menu__link} ${"/pixel-games"===s?a().menu__link_active:""}`,children:"Пиксельные"})}),l.jsx("li",{className:a().menu__item,children:l.jsx(g.default,{href:"/tds",className:`${a().menu__link} ${"/tds"===s?a().menu__link_active:""}`,children:"TDS"})})]}),l.jsx("div",{className:a().auth,children:e.isAuth?(0,l.jsxs)(l.Fragment,{children:[l.jsx(g.default,{href:"/profile",className:a().auth__button,children:"Профиль"}),l.jsx(g.default,{href:"/",className:a().auth__button,onClick:()=>{e.logout()},children:"Выйти"})]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("button",{className:a().auth__button,onClick:()=>{e.openPopup("auth")},children:"Войти"}),l.jsx("button",{className:a().register__button,onClick:()=>{e.openPopup("register")},children:"Зарегистрироваться"})]})})]}),l.jsx(n,{isOpened:e.popupIsOpened,closePopup:e.closePopup}),l.jsx(N,{isOpened:e.popupIsOpened,closePopup:e.closePopup,children:"auth"===e.typeForm?l.jsx(h,{}):l.jsx(f,{})})]})};var b=t(7912),w=t.n(b);let k=()=>{let e=(0,v.usePathname)();return(0,l.jsxs)("footer",{className:w().footer,children:["/"===e?(0,l.jsxs)("div",{className:w().footer__logo,children:[l.jsx("span",{className:w()["footer__logo-name"],children:"pindie"}),l.jsx("span",{className:w()["footer__logo-copy"],children:", XXI век"})]}):(0,l.jsxs)(g.default,{href:"/",className:w().footer__logo,children:[l.jsx("span",{className:w()["footer__logo-name"],children:"pindie"}),l.jsx("span",{className:w()["footer__logo-copy"],children:", XXI век"})]}),(0,l.jsxs)("ul",{className:w()["social-list"],children:[l.jsx("li",{className:w()["social-list__item"],children:l.jsx("a",{href:"https://youtube.com",className:`button ${w()["social-list__link"]}`,children:"YT"})}),l.jsx("li",{className:w().social_list__item,children:l.jsx("a",{href:"https://vk.com",className:`button ${w()["social-list__link"]}`,children:"ВК"})}),l.jsx("li",{className:w().social_list__item,children:l.jsx("a",{href:"https://t.me",className:`button ${w()["social-list__link"]}`,children:"TG"})})]})]})},P=e=>{let s=(0,p.o)();return(0,m.useEffect)(()=>{s.checkAuth()},[]),(0,l.jsxs)(l.Fragment,{children:[l.jsx(y,{}),e.children,l.jsx(k,{})]})}},515:(e,s,t)=>{"use strict";t.d(s,{BJ:()=>n,Fw:()=>d,Ns:()=>h,ZB:()=>m,d8:()=>l,jo:()=>p,lp:()=>_,m3:()=>c,v_:()=>u});let l=e=>!(e instanceof Error),r=async e=>{try{let s=await fetch(e);if(200!==s.status)throw Error();return await s.json()}catch(e){return e}},a=e=>{let s=JSON.stringify(e),t=JSON.parse(s=s.replaceAll("_id","id"));return{...t,category:t.categories}},o=e=>e.map(e=>a(e)),i=(e,s)=>(e=o(e)).filter(e=>e.users.find(e=>e.id===s)),n=async(e,s)=>{let t=await r(`${e}?categories.name=${s}`);return l(t)?o(t):t},_=async(e,s)=>{let t=await r(e);return l(t)?i(t,s):t},c=async(e,s,t)=>{try{let l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(200!==l.status&&"auth"===t)throw Error("Ошибка авторизации");if(200!==l.status&&"register"===t)throw Error("Ошибка регистрации");return await l.json()}catch(e){return e}},m=e=>{localStorage.setItem("jwt",e)},u=()=>localStorage.getItem("jwt"),d=()=>{localStorage.removeItem("jwt")},p=async(e,s)=>{try{let t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(200!==t.status)throw Error("Ошибка получения данных");return await t.json()}catch(e){return e}},h=async(e,s,t)=>{try{let l=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({users:t})});if(200!==l.status)throw Error("Ошибка голосования");return await l.json()}catch(e){return e}}},6525:(e,s,t)=>{"use strict";t.d(s,{H:()=>r});let l="https://brotherback.nomorepartiesco.ru/api",r={games:`${l}/games`,auth:`${l}/auth/login`,me:`${l}/me`,register:`${l}/registration`}},4797:(e,s,t)=>{"use strict";t.d(s,{o:()=>o});var l=t(114),r=t(515),a=t(6525);let o=(0,l.Ue)(e=>({isAuth:!1,popupIsOpened:!1,typeForm:null,user:null,token:null,login:(s,t)=>{e({isAuth:!0,user:s,token:t}),(0,r.ZB)(t)},logout:()=>{e({isAuth:!1,user:null,token:null}),(0,r.Fw)()},checkAuth:async()=>{let s=(0,r.v_)();if(s){let t=await (0,r.jo)(a.H.me,s);t instanceof Error?(e({isAuth:!1,user:null,token:null}),(0,r.Fw)()):(e({isAuth:!0,user:{...t,id:t._id},token:s}),(0,r.ZB)(s))}},openPopup:s=>{e({popupIsOpened:!0,typeForm:s})},closePopup:()=>{e({popupIsOpened:!1,typeForm:null})}}))},7912:e=>{e.exports={footer:"Footer_footer__YgQC9",footer__logo:"Footer_footer__logo__Mmgbk","footer__logo-name":"Footer_footer__logo-name__OLRT5","social-list":"Footer_social-list__fwHMn","social-list__link":"Footer_social-list__link__x1pN7"}},2127:e=>{e.exports={form:"Forms_form__6CB_j",form__title:"Forms_form__title__Py9By",form__fields:"Forms_form__fields__3PdS3",form__field:"Forms_form__field___diRi","form__field-title":"Forms_form__field-title__ZvmAO","form__field-input":"Forms_form__field-input__x0jsR",form__message:"Forms_form__message__TfSec",form__actions:"Forms_form__actions__ZDzg8",form__reset:"Forms_form__reset__bnwba",form__submit:"Forms_form__submit__tHIEE"}},6472:e=>{e.exports={header:"Header_header__hrF4W",logo:"Header_logo__0h7JC",logo__image:"Header_logo__image__512Hy",menu:"Header_menu__8FCNf",menu__list:"Header_menu__list__8hP64",menu__item:"Header_menu__item__sjT_f",menu__link:"Header_menu__link__ZucvR",menu__link_active:"Header_menu__link_active__KYq02",auth:"Header_auth__XjkQJ",auth__button:"Header_auth__button__7tPqk",register__button:"Header_register__button__I_q96"}},8116:e=>{e.exports={overlay:"Overlay_overlay__87APJ","overlay_is-opened":"Overlay_overlay_is-opened__QKW4v"}},5174:e=>{e.exports={popup:"Popup_popup__lJxRt","popup_is-opened":"Popup_popup_is-opened__R8NFO",close:"Popup_close__efpry","close-icon":"Popup_close-icon__QfKYp"}},2390:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>_});var l=t(9510);t(7272);var r=t(8570);let a=(0,r.createProxy)(String.raw`/home/student/finalfront/app/App.jsx`),{__esModule:o,$$typeof:i}=a;a.default;let n=(0,r.createProxy)(String.raw`/home/student/finalfront/app/App.jsx#App`),_={title:"Pindie",description:"Портал инди-игр от\xa0студентов Яндекс Практикума"};function c({children:e}){return l.jsx("html",{lang:"ru",children:l.jsx("body",{children:l.jsx(n,{children:e})})})}},7272:()=>{}};